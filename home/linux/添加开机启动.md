# 添加开机启动

[toc]

## zookeeper开机启动

进入到 `/etc/rc.d/init.d`目录下

`cd /etc/rc.d/init.d`

新建一个名为zookeeper的文件,添加启动内容

`vim zookeeper`

```bash
#!/bin/bash
#chkconfig: 2345 10 90
#description: service zookeeper

export JAVA_HOME=/usr/java/jdk8
ZOOKEEPER_HOME=/usr/local/userdata/apache-zookeeper-3.6.0-bin

case  "$1"   in
          start)  su  root   ${ZOOKEEPER_HOME}/bin/zkServer.sh   start;;
          start-foreground)  su  root  ${ZOOKEEPER_HOME}/bin/zkServer.sh    start-foreground;;
          stop)  su  root   ${ZOOKEEPER_HOME}/bin/zkServer.sh   stop;;
          status)  su root  ${ZOOKEEPER_HOME}/bin/zkServer.sh    status;;
          restart)  su root   ${ZOOKEEPER_HOME}/bin/zkServer.sh   restart;;
          upgrade)su root   ${ZOOKEEPER_HOME}/bin/zkServer.sh   upgrade;;
          print-cmd)su root   ${ZOOKEEPER_HOME}/bin/zkServer.sh   print-cmd;;
          *)  echo  "requirestart|start-foreground|stop|status|restart|print-cmd";;
esac

```

**那两条#号开头的也不能少,不然报`服务 zookeeper 不支持 chkconfig`**

然后执行,给予权限命令

`chmod  +x  /etc/rc.d/init.d/zookeeper`	

再加入到开机启动项

` chkconfig  --add  zookeeper`

查看是否添加成功

` chkconfig  --list`

```bash
注：该输出结果只显示 SysV 服务，并不包含
原生 systemd 服务。SysV 配置数据
可能被原生 systemd 配置覆盖。

      要列出 systemd 服务，请执行 'systemctl list-unit-files'。
      查看在具体 target 启用的服务请执行
      'systemctl list-dependencies [target]'。

netconsole      0:关    1:关    2:关    3:关    4:关    5:关    6:关
network         0:关    1:关    2:开    3:开    4:开    5:开    6:关
zookeeper       0:关    1:关    2:开    3:开    4:开    5:开    6:关

```

## hadoop添加开机启动

进入到 `/etc/rc.d/init.d`目录下

`cd /etc/rc.d/init.d`

新建一个名为hadoop的文件,添加启动内容

`vim hadoop`

```bash
#!/bin/bash
#chkconfig:2345 20 90
#description:hadoop
#processname:hadoop
export JAVA_HOME=/usr/java/jdk8
HADOOP_HOME=/usr/local/userdata/hadoop-3.2.1
case $1 in
    start) su root ${HADOOP_HOME}/sbin/start-all.sh;;
    stop) su root ${HADOOP_HOME}/sbin/stop-all.sh;;
    *) echo "require start|stop" ;;
esac
```

然后执行,给予权限命令

`chmod  +x  /etc/rc.d/init.d/hadoop`	

再加入到开机启动项

` chkconfig  --add  hadoop`

查看是否添加成功

` chkconfig  --list`