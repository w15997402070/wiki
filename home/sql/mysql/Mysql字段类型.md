



存储数据类型

1. 更小的通常更好

   一般应该尽量使用可以正确存储数据的最小的数据类型.更小的数据类型通常更快,因为他们占用更少的磁盘,内存和CPU缓存,并且处理时需要的CPU周期也更少

2. 简单就好

   简单数据类型的操作通常需要更少的CPU周期

3. 尽量避免NULL

   如果查询中包含可以为NULL的列,对MySQL来说更难优化,因为可以为NULL的列使得索引,索引统计和值都更复杂,可为NULL的列会使用更多的存储空间，在MySQL里也需要特殊处理。当可为NULL的列被索引时，每个索引记录需要一个额外的字节，在MyISAM里甚至还可能导致固定大小的索引（例如只有一个整数列的索引）变成可变大小的索引。

   通常把可为NULL的列改为NOT NULL带来的性能提升比较小，所以（调优时）没有必要首先在现有schema中查找并修改掉这种情况，除非确定这会导致问题。但是，如果计划在列上建索引，就应该尽量避免设计成可为NULL的列。
   当然也有例外，例如值得一提的是，InnoDB使用单独的位（bit）存储NULL值，所以对于稀疏数据4有很好的空间效率。但这一点不适用于MyISAM。

4. 

### 整数类型

| MySQL数据类型 | 含义（有符号）                             | 无符号       |
| ------------- | ------------------------------------------ | ------------ |
| tinyint(m)    | 1个字节(byte) 范围(-128~127)               | 0-255        |
| smallint(m)   | 2个字节(byte) 范围(-32768~32767)           | 0-65535      |
| mediumint(m)  | 3个字节(byte) 范围(-8388608~8388607)       | 0-16 777 215 |
| int(m)        | 4个字节(byte) 范围(-2147483648~2147483647) |              |
| bigint(m)     | 8个字节(byte) 范围(+-9.22*10的18次方)      |              |

有符号和无符号类型使用相同的存储空间，并具有相同的性能，因此可以根据实际情况选择合适的类型。

MySQL可以为整数类型指定宽度，例如INT（11），对大多数应用这是没有意义的：它不会限制值的合法范围，只是规定了MySQL的一些交互工具（例如MySQL命令行客户端）用来显示字符的个数。对于存储和计算来说，INT（1）和INT（20）是相同的。

### 小数类型

| FLOAT   | 4 bytes                                  | 单精度 浮点数值 |
| ------- | ---------------------------------------- | --------------- |
| DOUBLE  | 8 bytes                                  | 双精度 浮点数值 |
| DECIMAL | 对DECIMAL(M,D) ，如果M>D，为M+2否则为D+2 | 小数值          |

浮点和DECIMAL类型都可以指定精度。对于DECIMAL列，可以指定小数点前后所允许的最大位数。这会影响列的空间消耗。MySQL5.0和更高版本将数字打包保存到一个二进制字符串中（每4个字节存9个数字）。例如，DECIMAL（18，9）小数点两边将各存储9个数字，一共使用9个字节：小数点前的数字用4个字节，小数点后的数字用4个字节，小数点本身占1个字节。

## 字符串类型

VARCHAR类型用于存储可变长字符串，是最常见的字符串数据类型。它比定长类型更节省空间，因为它仅使用必要的空间（例如，越短的字符串使用越少的空间）。

VARCHAR需要使用1或2个额外字节记录字符串的长度：如果列的最大长度小于或等于255字节，则只使用1个字节表示，否则使用2个字节。假设采用latinl字符集，一个VARCHAR（10）的列需要11个字节的存储空间。VARCHAR（1000）的列则需要1002个字节，因为需要2个字节存储长度信息。

```sql
CREATE TABLE test(
  id INT(20) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(6),
  PRIMARY KEY (`id`)
);
-- 插入不进去
INSERT INTO test (`name`) VALUES ('1111111')
-- 插入不进去
INSERT INTO test (`name`) VALUES ('这中文字符测试');

查询：insert into test (`name`) values ('这中文字符测试')

错误代码： 1406
Data too long for column 'name' at row 1

--可以插入进去
INSERT INTO test (`name`) VALUES ('中文字符测试')
INSERT INTO test (`name`) VALUES ('111111')
```

```
使用VARCHAR（5）和VARCHAR（200）存储’hello'的空间开销是一样的。那么使用更短的列有什么优势吗？
事实证明有很大的优势。更长的列会消耗更多的内存，因为MySQL通常会分配固定大小的内存块来保存内部值。尤其是使用内存临时表进行排序或操作时会特别糟糕。在利用磁盘临时表进行排序时也同样糟糕。
所以最好的策略是只分配真正需要的空间。
```

