### 1.通过id查找多个元素

/**
*  函数接受任意多的字符串参数
*  每个参数都通元素的id传给document.getElementById();
*  返回一个对象,把这些id映射到对应的Element对象
*  如任何一个id未定义,则抛出一个Error对象
*/

```js
function getElements(/*ids...*/){

    var Elements = {};
    for (var i = 0; i <  var id = arguments.length; i++) {

       var id = arguments[i];
       var Elt = document.getElementById(id);
       if (Elt == null) {
         throw new Error("No Element with id : "+id);
       }
       Elements[id] = elt;
    }
    return Elements;
}
```

### 2.文档遍历函数

/*
* 返回元素e的第n层祖先元素,如果不存在此类祖先元素或祖先元素不是Element则返回null
*  如果n为0则返回元素本身,如果n为1或省略则返回其父元素
*  如果n为2则为其祖父元素,依此类推
 */
 
 ```js
   function parent(e,n){
      if (n === undefined) {
        n = 1;
      }
      while (n-- && e) {
        e = e.parentNode;
      }
      if (!e || e.nodeType !== 1 ) {
        return null;
      }
      return e;
   }
 ```
/*
*    返回元素e的第n个兄弟元素
*    如果n为正,返回后续的第n个兄弟元素
*    如果n为负,返回前面的第n个元素
*    如果n为0,返回元素本身
*/

```js
    function sibling(e,n){
      while ( e && n !== 0 ) {
        if ( n > 0 ) { //查找后续的兄弟元素
          if( e.nextElementSibling ){
            e = e.nextElementSibling;
          }else {
            for ( e = e.nextSibling ; e && e.nodeType !== 1; e = e.nextSibling){
              //空循环
            }
          }
          n--;
        }else { //查找前面的兄弟元素
          if( e.previousElementSibling ){
            e = e.previousElementSibling;
          }else {
            for ( e = e.previousSibling ; e && e.nodeType !== 1; e = e.previousSibling){
              //空循环
            }
          }
          n++;
        }
      }
      return e;
    }
```
/*
*   返回元素e的第n代子元素,不存在则返回null
*   负值n代表从后往前计数,0代表第一个子元素,而负一代表最后一个子元素,-2代表倒数第二个子元素,依次类推
*/
```js
  function child(e,n){
    if (e.children) {  //如果children数组存在
      if (n < 0 ) { n += e.children.length;}  //转换负的n为数组索引
      if (n < 0) { return null;}  //如果它仍为负,说明没有元素
      return e.children[n];  //返回指定的元素
    }
    //如果e没有children数组,找到第一个子元素并向前数,或找到最后一个子元素往回数
    if( n >= 0 ){  //n为非负,从第一个元素开始向前数
      //找到元素e的第一个子元素
      if (e.firstElementChild) {
        e = e.firstElementChild;
      }else {
        for ( e = e.firstChild ; e && e.nodeType !== 1; e = e.nextSibling){
          //空循环
        }
      }
      return sibling(e,n);  //返回第一个子元素的第n个兄弟元素
    }else {  //n为负,从最后一个元素往回数
      if (e.lastElementChild) {
        e = e.lastElementChild;
      }else {
        for ( e = e.lastChild ; e && e.nodeType !== 1; e = e.previousSibling){
          //空循环
        }
      }
      return sibling(e,n+1);  //+1来转化最后一个子元素为最后一个兄弟元素
    }
  }
```
### 3.插入节点
/*
  *  将child节点插入到parent中,使其成为第n个子节点
*/
```js
  function insertAt(parent,child,n){
    if( n < 0 || n > parent.childNodes.length){
      throw new Error("invalid index");
    }else if (n == parent.childNodes.length ) {
      parent.appendChild(child);
    }else{
      parent.insertBefore(child,parent.childNodes[n]);
    }
  }
```
### 4.表格的行排序
/*
*  根据指定表格每行第n个单元格的值,对第一个<tbody>中的行进行排序
*  如果存在comparator函数,则使用它,否则按字母表顺序排序
*/
```js

  function sortRows(table,n,comparator){
    var tbody = table.tbodies[0]; //第一个<tbody>,可能是隐式创建的
    var rows = tbody.getElementsByTagName("tr");  //tbody中的所有行
    rows = Array.prototype.slice.call(rows,0);  //真实数组中的快照

    //基于第n个<td>元素的值进行排序
    rows.sort(function(row1,row2){
      var cell1 = row1.getElementsByTagName("td")[n];  //获得第n个单元格
      var cell2 = row2.getElementsByTagName("td")[n];  //两行都是
      var val1 = cell1.textContent || cell1.innerText;  //获得文本内容
      var val2 = cell2.textContent || cell2.innerText;  //同上
      if (comparator) {  //进行比较
        return comparator(val1,val2);
      }

      if (val1 < val2 ){ return -1 ;}
      if (val1 > val2) { return 1 ; }
      else{ return 0 ; }
    })
    //在<tbody>中按他们的顺序把行添加到最后
    //这将自动把他们移走而没必要预先删除它们
    //如果<tbody>中还包含了除了<tr>的任何其他元素,这些节点将会悬浮到顶部
    for (var i = 0; i < rows.length; i++) {
      tbody.appendChild(rows[i]);
    }
  }

```
```js
  //查找表格的<th>元素(假设只有一行),让他们可单击
  //以便单击列标题,按该列对行排序
  function makeSortable(table){
    var headers = table.getElementsByTagName("th");
    for (var i = 0; i < headers.length; i++) {
       (function{  //嵌套函数来创建本地作用域
         headers[i].onclick = function () { sortRows(table,n);}
       }(i));  //将i的值赋给局部变量
    }
  }
```
